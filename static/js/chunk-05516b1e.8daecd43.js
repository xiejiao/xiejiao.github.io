(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05516b1e"],{1276:function(t,e,i){"use strict";var n=i("2ba4"),s=i("c65b"),a=i("e330"),r=i("d784"),o=i("44e7"),l=i("825a"),u=i("1d80"),h=i("4840"),c=i("8aa5"),d=i("50c4"),g=i("577e"),f=i("dc4a"),m=i("4dae"),p=i("14c3"),v=i("9263"),w=i("9f7f"),b=i("d039"),_=w.UNSUPPORTED_Y,x=4294967295,k=Math.min,L=[].push,y=a(/./.exec),T=a(L),N=a("".slice),C=!b((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));r("split",(function(t,e,i){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var a=g(u(this)),r=void 0===i?x:i>>>0;if(0===r)return[];if(void 0===t)return[a];if(!o(t))return s(e,a,t,r);var l,h,c,d=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,w=new RegExp(t.source,f+"g");while(l=s(v,w,a)){if(h=w.lastIndex,h>p&&(T(d,N(a,p,l.index)),l.length>1&&l.index<a.length&&n(L,d,m(l,1)),c=l[0].length,p=h,d.length>=r))break;w.lastIndex===l.index&&w.lastIndex++}return p===a.length?!c&&y(w,"")||T(d,""):T(d,N(a,p)),d.length>r?m(d,0,r):d}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:s(e,this,t,i)}:e,[function(e,i){var n=u(this),r=void 0==e?void 0:f(e,t);return r?s(r,e,n,i):s(a,g(n),e,i)},function(t,n){var s=l(this),r=g(t),o=i(a,s,r,n,a!==e);if(o.done)return o.value;var u=h(s,RegExp),f=s.unicode,m=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(_?"g":"y"),v=new u(_?"^(?:"+s.source+")":s,m),w=void 0===n?x:n>>>0;if(0===w)return[];if(0===r.length)return null===p(v,r)?[r]:[];var b=0,L=0,y=[];while(L<r.length){v.lastIndex=_?0:L;var C,E=p(v,_?N(r,L):r);if(null===E||(C=k(d(v.lastIndex+(_?L:0)),r.length))===b)L=c(r,L,f);else{if(T(y,N(r,b,L)),y.length===w)return y;for(var F=1;F<=E.length-1;F++)if(T(y,E[F]),y.length===w)return y;L=b=C}}return T(y,N(r,b)),y}]}),!C,_)},"14c3":function(t,e,i){var n=i("da84"),s=i("c65b"),a=i("825a"),r=i("1626"),o=i("c6b6"),l=i("9263"),u=n.TypeError;t.exports=function(t,e){var i=t.exec;if(r(i)){var n=s(i,t,e);return null!==n&&a(n),n}if("RegExp"===o(t))return s(l,t,e);throw u("RegExp#exec called on incompatible receiver")}},"44e7":function(t,e,i){var n=i("861d"),s=i("c6b6"),a=i("b622"),r=a("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==s(t))}},"8aa5":function(t,e,i){"use strict";var n=i("6547").charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},"919a":function(t,e,i){"use strict";i("ec07")},b9f6:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-wrapper"},[i("div",{staticClass:"lesson-head"},[i("svg",{staticClass:"bar-icon left-icon",attrs:{"aria-hidden":"true"},on:{click:function(e){t.show1=!0}}},[i("use",{attrs:{"xlink:href":"#icon-hamburger"}})]),i("span",{staticClass:"lesson-title"},[t._v(t._s(t.lesson_obj.title))]),i("router-link",{attrs:{to:"/englishindex"}},[i("svg",{staticClass:"bar-icon right-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-home"}})])])],1),i("router-view",{on:{readThisWord:t.readThisWord}}),i("div",{staticClass:"footer"},[i("div",{staticClass:"footer-container"},[i("div",{staticClass:"footer-ctrl"},[i("van-checkbox",{staticClass:"footer-ctrl-follow",attrs:{"checked-color":"#f0250f"},on:{change:function(e){return t.onChangeFollow(e)}},model:{value:t.isFollow,callback:function(e){t.isFollow=e},expression:"isFollow"}},[t._v("跟读")]),i("div",{staticClass:"footer-ctrl-follow"},[t.isFollow?i("van-stepper",{attrs:{step:.5,"decimal-length":1,min:1},on:{change:t.changeWaitingRate},model:{value:t.waitingRate,callback:function(e){t.waitingRate=e},expression:"waitingRate"}}):t._e()],1)],1),i("audio-player",{ref:"audioPlayer",staticClass:"audio-player",attrs:{"audio-list":t.audioList.map((function(t){return t.url})),"before-play":t.handleBeforePlay,isLoop:!1,progressInterval:100},on:{playing:t.handlePlaying,userctrl:t.onUserCtrl}})],1)]),i("van-popup",{style:{width:t.width,height:t.height},attrs:{position:"left"},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[i("h3",[t._v(t._s(t.gradeTitle))]),i("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.lesson_list,(function(e,n){return i("van-collapse-item",{attrs:{title:e.title,ikey:e.text_id,size:"large","title-class":"lesson-module"}},t._l(e.children,(function(e,n){return i("a",{staticClass:"lesson-titles",attrs:{ikey:e.text_id,href:"javascript:void(0);"},on:{click:function(i){return t.handleClickLesson(e.text_id)}}},[t._v(t._s(e.title))])})),0)})),1)],1)],1)},s=[],a=i("5530"),r=(i("d3b7"),i("25f0"),i("ac1f"),i("1276"),i("2f62")),o=i("852e"),l=i.n(o);function u(t,e){return l.a.set(t,e)}function h(t){return l.a.get(t)}var c=i("ec8d"),d={name:"hanzi",components:{AudioPlayer:c["a"]},computed:Object(a["a"])({gradeTitle:function(){var t="English "+this.grade+" - "+this.stage;return t}},Object(r["b"])(["name","new_fragment_id"])),data:function(){return{ENGLISH:{},input:"",show1:!1,width:"350px",height:"100%",bookName:"",bookObj:null,grade:3,stage:2,lesson_id:"1_1",lesson_obj:{},lesson_list:[],audio:null,audioList:[{name:"音频1",url:"res/audio/English/2_1/Module01_Words.mp3"}],isFollow:!0,fragmentList:[],currFragment:0,nextFragment:0,waitingRate:2,idTimeout:-1,currentTime:0,isJumpNew:!1,activeNames:[]}},mounted:function(){this.audio=this.$refs.audioPlayer,this.initBookInfo(),window.addEventListener("keyup",this.handleKeyup),this.$nextTick((function(){}))},destroyed:function(){window.removeEventListener("keyup",this.handleKeyup)},created:function(){var t=h("WAITING-RATE");t&&(this.waitingRate=t)},watch:{$route:function(){this.initBookInfo()},new_fragment_id:function(t){var e=this;t>=e.fragmentList.length&&(t=e.fragmentList.length),clearTimeout(e.idTimeout),e.audio.pause(),e.setCurrFragment(t),e.audio.setCurrentTime(parseFloat(e.fragmentList[t])),e.isJumpNew=!0,e.audio.play()}},methods:{initBookInfo:function(){this.ENGLISH=window.EnglishInfo,this.$route.query.grade&&(this.grade=this.$route.query.grade),this.$route.query.stage&&(this.stage=this.$route.query.stage),this.$route.query.lesson&&(this.lesson_id=this.$route.query.lesson);var t="ENGLISH"+this.grade.toString()+"_"+this.stage.toString();if(this.bookName=t,this.ENGLISH[t]){this.bookObj=this.ENGLISH[this.bookName];var e=this.ENGLISH[this.bookName];if(this.makeLeftNav(this.ENGLISH[t]),!this.lesson_id||!this.ENGLISH[t]["B_"+this.lesson_id])for(var i in e){this.lesson_id=i;break}this.getLesson(this.lesson_id)}},makeLeftNav:function(t){this.lesson_list=[];for(var e=1;e<=10;e++){var i={text_id:"module"+e,title:"Module "+e,children:[]};this.makeModule(e,i),this.lesson_list.push(i)}},makeModule:function(t,e){e.children=[],e.children.push(this.makeLesson(t,"Unit",1)),e.children.push(this.makeLesson(t,"Unit",2)),e.children.push(this.makeLesson(t,"Words",0))},makeLesson:function(t,e,i){var n="";if("Unit"===e){var s=this.ENGLISH[this.bookName]["B_"+t+"_"+i];n+=" "+i+" "+s.title}var a={text_id:t+"_"+i,lesson_type:e,title:e+n};return a},handleClickLesson:function(t){this.getLesson(t),window.scrollTo(0,0),this.show1=!1},getLesson:function(t){this.lesson_id=t,this.lesson_obj=this.ENGLISH[this.bookName]["B_"+this.lesson_id],0===this.lesson_obj.type?this.$router.push("/english/word?grade="+this.grade+"&stage="+this.stage+"&lesson="+this.lesson_id):this.$router.push("/english/unit?grade="+this.grade+"&stage="+this.stage+"&lesson="+this.lesson_id),this.initAudio(),this.audioList=[{name:this.lesson_obj.title,url:"res/audio/English/"+this.grade+"_"+this.stage+"/"+this.lesson_obj.mp3}],this.fragmentList=[],this.lesson_obj.fragment&&this.lesson_obj.fragment.length>0&&(this.fragmentList=this.lesson_obj.fragment.split(",")),this.setCurrFragment(0)},handleBeforePlay:function(t){t()},handlePlaying:function(){var t=this;if(t.isJumpNew)t.isJumpNew=!1;else if(this.currentTime=this.audio.currentTime,this.audio.isPlaying){var e=this.fragmentList.length;if(!(e<1))for(var i=""===this.audio.currentTime?0:this.audio.currentTime,n=0;n<this.fragmentList.length;n++)if(this.fragmentList[n]<i&&(n==e-1||i<=this.fragmentList[n+1])&&this.nextFragment!==n)if(this.nextFragment=n,this.isFollow){this.audio.pause();var s=(this.fragmentList[n]-this.fragmentList[n-1])*this.waitingRate;clearTimeout(this.idTimeout),this.idTimeout=setTimeout(this.waitingNext,1e3*s)}else this.setCurrFragment(this.nextFragment)}},waitingNext:function(){this.setCurrFragment(this.nextFragment),this.audio.isPlaying||this.audio.play()},onUserCtrl:function(){clearTimeout(this.idTimeout),this.setCurrFragment(this.nextFragment)},onChangeFollow:function(t){this.isFollow=t},initAudio:function(){this.audio.pause(),this.audio.initAudio()},handleKeyup:function(t){var e=this;if("TEXTAREA"!=t.target.nodeName&&"INPUT"!=t.target.nodeName&&this.fragmentList&&!(this.fragmentList.length<1)){var i=t||window.event||arguments.callee.caller.arguments[0];if(i&&this.audio){i.key;var n=i.keyCode,s=this.currFragment,a=!1;37==n?(s=s>0?--s:0,a=!0):39==n&&(s=s<this.fragmentList.length-1?++s:this.fragmentList.length-1,a=!0),1==a&&(clearTimeout(this.idTimeout),this.audio.pause(),this.$nextTick((function(){e.audio.setCurrentTime(e.fragmentList[s]),e.audio.play(),e.nextFragment=s,e.setCurrFragment(s)})))}}},setCurrFragment:function(t){t<0&&(t=0),this.currFragment=t,this.nextFragment=t,this.$store.dispatch("lesson/setCurrId",this.currFragment)},readThisWord:function(t){},changeWaitingRate:function(){u("WAITING-RATE",this.waitingRate)}}},g=d,f=(i("919a"),i("2877")),m=Object(f["a"])(g,n,s,!1,null,"453e3db8",null);e["default"]=m.exports},d784:function(t,e,i){"use strict";i("ac1f");var n=i("e330"),s=i("6eeb"),a=i("9263"),r=i("d039"),o=i("b622"),l=i("9112"),u=o("species"),h=RegExp.prototype;t.exports=function(t,e,i,c){var d=o(t),g=!r((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),f=g&&!r((function(){var e=!1,i=/a/;return"split"===t&&(i={},i.constructor={},i.constructor[u]=function(){return i},i.flags="",i[d]=/./[d]),i.exec=function(){return e=!0,null},i[d](""),!e}));if(!g||!f||i){var m=n(/./[d]),p=e(d,""[t],(function(t,e,i,s,r){var o=n(t),l=e.exec;return l===a||l===h.exec?g&&!r?{done:!0,value:m(e,i,s)}:{done:!0,value:o(i,e,s)}:{done:!1}}));s(String.prototype,t,p[0]),s(h,d,p[1])}c&&l(h[d],"sham",!0)}},ec07:function(t,e,i){}}]);